env delete bootargs

setenv aos_boot1 'if test ${aos_boot1_ok} -eq 1; then setenv aos_boot1_ok 0; setenv aos_boot2_ok 1; setenv aos_boot_part 0; setenv aos_boot_slot 1; echo "==== Boot from part 1"; run aos_save_vars; run aos_boot_cmd; fi'
setenv aos_boot2 'if test ${aos_boot2_ok} -eq 1; then setenv aos_boot2_ok 0; setenv aos_boot1_ok 1; setenv aos_boot_part 1; setenv aos_boot_slot 2; echo "==== Boot from part 2"; run aos_save_vars; run aos_boot_cmd; fi'
setenv aos_boot_cmd 'run aos_xen_load; run aos_dtb_load; run aos_image_load; run aos_initramfs_load; run aos_xenpolicy_load; bootm 0x48080000 0x84000000 0x48000000'
setenv aos_boot_device 'sda'
setenv aos_default_vars 'setenv aos_boot_main 0; setenv aos_boot1_ok 1; setenv aos_boot2_ok 1; setenv aos_boot_part 0'
setenv aos_device 'scsi 0'
setenv aos_dtb_load 'ext2load ${aos_device}:${aos_boot_slot} 0x48000000 xen.dtb; fdt addr 0x48000000; fdt resize; fdt mknode / boot_dev; fdt set /boot_dev device ${aos_boot_device}'
setenv aos_load_vars 'run aos_default_vars; if load ${aos_device}:3 ${loadaddr} uboot.env; then env import -t ${loadaddr} ${filesize}; else run aos_save_vars; fi'
setenv aos_save_vars 'env export -t ${loadaddr} aos_boot_main aos_boot_part aos_boot1_ok aos_boot2_ok; fatwrite ${aos_device}:3 ${loadaddr} uboot.env 0x3E'
setenv aos_xen_load 'ext2load ${aos_device}:${aos_boot_slot} 0x48080000 xen'
setenv aos_xenpolicy_load 'ext2load ${aos_device}:${aos_boot_slot} 0x7e000000 xenpolicy'
setenv aos_image_load 'ext2load ${aos_device}:${aos_boot_slot} 0x7a000000 Image'
setenv aos_initramfs_load 'ext2load ${aos_device}:${aos_boot_slot} 0x84000000 uInitramfs'
setenv bootcmd_aos 'run aos_load_vars; if test ${aos_boot_main} -eq 0; then run aos_boot1; run aos_boot2; else run aos_boot2; run aos_boot1; fi'
setenv bootcmd 'scsi scan; run bootcmd_aos'

boot

